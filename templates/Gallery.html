<!DOCTYPE html>

<html>
<head>
    <title>Index of {{ display_path }}</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=.5" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='grid_layout.css') }}" />
</head>

<body>
    <h1>Index of {{ display_path }}</h1>

    <table>
        {% for item, item_relpath, type in dir_contents %}
            {% if loop.index0 % items_per_row == 0 %}
                <tr>
            {% endif %}

            <td>
            {% if type == MIME_IMAGE_THUMBED %}
                <a href="" target="_blank">
                    <img src="" />
                </a>
            {% else %}
                {% if type != MIME_DIRECTORY %}
                    {% set link_target='_blank' %}
                {% else %}
                    {% set link_target='' %}
                {% endif %}
                <a href="{{ url_for('gallery', relpath=(item_relpath)) }}" target="{{ link_target }}">
                    <img src="{{ url_for('static', filename='icons/'+type) }}" /><br />
                    {{ item }}
                </a>
            {% endif %}
            </td>

            {% if (loop.index) % items_per_row == 0 or loop.last %}
                </tr>
            {% endif %}

        {% endfor %}
    </table>

    <br>
    <address><a href="https://github.com/ion201/AutoGalleryIndex">AutoGalleryIndex</a>/{{ release_version }}</address>
</body>
</html>
